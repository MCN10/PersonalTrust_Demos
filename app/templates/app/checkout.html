
{% extends 'inside_base.html' %}


{% load static %}

{% block body %}




<div class="view">

    <!-- Grid -->

    <section class="grid grid--loader">
        <h3 class="">Make Once Off Payment</h3>
        <div class=" p-3 p-md-4">
            <form id="form" class="card " >
                <div id="user-informaton">
                    <br>
                    <h4>Beneficiary Information</h4>
                        {% if user.is_authenticated %}<input style="border-radius: 5px; padding: 10px; color: #000;" required class="form-control" type="text" name="name" placeholder="{{ beneficiary.name }}" value="{{ beneficiary.name }}" readonly> {% else %} <input style="border-radius: 5px; padding: 10px" required class="form-control" type="text" name="name" placeholder="Name..">{% endif %}
                        {% if user.is_authenticated %}<input style="border-radius: 5px; padding: 10px; color: #000;" required class="form-control" type="email" name="email" placeholder="{{ beneficiary.surname }}" value="{{ beneficiary.surname }}" readonly> {% else %} <input style="border-radius: 5px; padding: 10px" required class="form-control" type="email" name="email" placeholder="Email..">{% endif %}
                </div>

                <div id="shipping-info" >
                    <br>
                    <h4>Payment Amount</h4>
                    <div class="form-field" >
                        <input id="textbox_id"  class="form-control" style="border-radius: 5px; padding: 10px" required type="text" name="country" placeholder="R0.00">
                    </div>
                </div>

                <br>
            </form>
        </div>
        <div class=" p-3 p-md-4">


            <div class="box-element  " id="payment-info">

                <br>
                <div style="padding-right: 30%;padding-left: 30%">
                    <hr>
                    <h3>Billing Details:</h3>
                    <hr>
                    <div id="paypal-button-container"></div>

                </div>

            </div>
            <br>
            <hr>

            <p class="action--text"><a href="{% url 'app:profile' %}" class="btn action--button-btn">Back to your Profile</a>
                <a href="{% url 'app:home' %}" class="btn action--button-btn">Home</a></p>

                <hr>

        </div>
    </section>
</div>
<!-- Include the PayPal JavaScript SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=AWTSBLTVTYkqnxwKZvM8PEFfIp0z-RpJaw1_6Bj_LWht6CCM8Umq4j0WOc5Ue3_VKDkMsmedjNaT7O7-&currency=USD"></script>

<script>
    var total = '{{order.get_cart_total}}'
    // Render the PayPal button into #paypal-button-container
    paypal.Buttons({

        style: {
            color: 'blue',
            label: 'pay',
            height: 40
        },

        // Set up the transaction
        createOrder: function(data, actions) {
            return actions.order.create({
                purchase_units: [{
                    amount: {
                        value: parseFloat(total).toFixed(2)
                    }
                }]
            });
        },

        // Finalize the transaction
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                // Show a success message to the buyer
                submitFormData();
            });
        }


    }).render('#paypal-button-container');

</script>



{% endblock body %}
